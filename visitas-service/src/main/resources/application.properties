# Application configuration
quarkus.application.name=visitas-service
quarkus.http.port=8081

# Datasource configuration for PostgreSQL
quarkus.datasource.db-kind=postgresql
quarkus.datasource.jdbc.url=jdbc:postgresql://${DATABASE_HOST:localhost}:${DATABASE_PORT:5432}/${DATABASE_NAME:visitas_db}
quarkus.datasource.username=${DATABASE_USER:postgres}
quarkus.datasource.password=${DATABASE_PASSWORD:postgres}
quarkus.datasource.jdbc.max-size=16

# Hibernate ORM configuration
quarkus.hibernate-orm.database.generation=none
quarkus.hibernate-orm.log.sql=true
quarkus.hibernate-orm.sql-load-script=no-file

# Flyway migration configuration
quarkus.flyway.migrate-at-start=true
quarkus.flyway.baseline-on-migrate=true
quarkus.flyway.baseline-version=0

# REST Client configuration for prisioneiro-core service
quarkus.rest-client.prisioneiro-api.url=${PRISIONEIRO_SERVICE_URL:http://localhost:8080}
quarkus.rest-client.prisioneiro-api.scope=jakarta.inject.Singleton

# Fault Tolerance configuration
org.eclipse.microprofile.faulttolerance.Timeout/value=5000

# Kafka configuration for event-driven architecture
kafka.bootstrap.servers=${KAFKA_BOOTSTRAP_SERVERS:localhost:9092}
mp.messaging.outgoing.visitas-events.connector=smallrye-kafka
mp.messaging.outgoing.visitas-events.topic=visitas-events
mp.messaging.outgoing.visitas-events.value.serializer=org.apache.kafka.common.serialization.StringSerializer

# Health check configuration
quarkus.smallrye-health.root-path=/health

# CORS configuration
quarkus.http.cors=true
quarkus.http.cors.origins=http://localhost:4200,http://localhost:3000
quarkus.http.cors.methods=GET,PUT,POST,DELETE,OPTIONS
quarkus.http.cors.headers=accept,authorization,content-type,x-requested-with
quarkus.http.cors.exposed-headers=Content-Disposition
quarkus.http.cors.access-control-max-age=24H

# Logging configuration
quarkus.log.level=INFO
quarkus.log.category."com.gabrielfarah".level=DEBUG
quarkus.log.console.enable=true
quarkus.log.console.format=%d{HH:mm:ss} %-5p [%c{2.}] (%t) %s%e%n

# Dev mode configuration
%dev.quarkus.datasource.jdbc.url=jdbc:postgresql://localhost:5432/visitas_db
%dev.quarkus.datasource.username=postgres
%dev.quarkus.datasource.password=postgres
%dev.quarkus.rest-client.prisioneiro-api.url=http://localhost:8080
%dev.kafka.bootstrap.servers=localhost:9092

# Test mode configuration
%test.quarkus.datasource.db-kind=h2
%test.quarkus.datasource.jdbc.url=jdbc:h2:mem:test;DB_CLOSE_DELAY=-1
%test.quarkus.datasource.username=sa
%test.quarkus.datasource.password=
%test.quarkus.hibernate-orm.database.generation=drop-and-create
%test.quarkus.flyway.migrate-at-start=false
